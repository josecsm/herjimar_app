{"version":3,"file":"herjimar.js","sources":["../../../../apps/herjimar/herjimar/public/js/herjimar.js"],"sourcesContent":["!function(){\"use strict\";$(document).on(\"app_ready\",function(){var e=[],o=frappe.get_route();if(o.length>=3&&\"List\"==o[0]&&\"List\"==o[2]){var r=o[1];console.log(\"pidiendo menus de \"+r),frappe.db.get_list(\"Formatos de Exportacion\",{fields:[\"name\",\"nombre\"],filters:{modelo:r,activo:1,modo:\"Lista\"}}).then(function(o){console.log(\"ha vuelto \"+r),e=o,frappe.listview_settings[r]={onload:function(o){e.forEach(function(e){e.nombre;var r=e.name;o.page.add_menu_item(e.nombre,function(e){var o=$(frappe.pages[frappe.get_route().join(\"/\")]).find(\"input:checked\");if(0!=o.length){var a=[];o.each(function(e,o){var r=unescape($(o).attr(\"data-name\"));a.push(r)}),console.log(a),frappe.call({method:\"herjimar.herjimar.exportacion.exportarlista\",callback:function(e){\"ERROR\"!=e.message&&(window.location.href=\"https://erp.herjimar.com/files/\"+e.message)},args:{plantilla:r,objetos:a},btn:$(\".primary-action\"),freeze:!0,error:function(e){console.log(\"Error:\"+e.message)}})}else frappe.throw(\"Debe elegir los registros a exportar\")})})}}})}frappe.db.get_list(\"Formatos de Exportacion\",{fields:[\"name\",\"modelo\"],filters:{activo:1}}).then(function(e){for(var o=0;o<e.length;o++)console.log(\"he leido \"+e[o].modelo)}),frappe.db.get_list(\"Formatos de Exportacion\",{fields:[\"name\",\"modelo\"],filters:{activo:1}}).then(function(e){for(var o=0;o<e.length;o++)frappe.ui.form.on(e[o].modelo,{refresh:function(e){frappe.db.get_list(\"Formatos de Exportacion\",{fields:[\"name\"],filters:{activo:1,modo:\"Registro\",modelo:e.doctype}}).then(function(o){for(var r=0;r<o.length;r++){var a=e.docname;e.page.add_menu_item(o[r].name,function(e){console.log(\"voy a llamar\"),frappe.call({method:\"herjimar.herjimar.exportacion.exportar\",callback:function(e){console.log(\"he vuelto de frape call\"),console.log(e),\"ERROR\"!=e.message&&(window.location.href=\"https://erp.herjimar.com/files/\"+e.message)},args:{plantilla:e.currentTarget.innerText,objeto:a},btn:$(\".primary-action\"),freeze:!0,error:function(e){console.log(\"Error:\"+e.message)}})})}})}})})})}();\n//# sourceMappingURL=herjimar.js.map\n"],"names":["$","document","on","e","o","frappe","get_route","length","r","console","log","db","get_list","fields","filters","modelo","activo","modo","then","listview_settings","onload","forEach","nombre","name","page","add_menu_item","pages","join","find","a","each","unescape","attr","push","call","method","callback","message","window","location","href","args","plantilla","objetos","btn","freeze","error","throw","ui","form","refresh","doctype","docname","currentTarget","innerText","objeto"],"mappings":"yBAAyBA,EAAEC,UAAUC,GAAG,YAAY,WAAW,IAAIC,EAAE,GAAGC,EAAEC,OAAOC,YAAY,GAAGF,EAAEG,QAAQ,GAAG,QAAQH,EAAE,IAAI,QAAQA,EAAE,GAAG,CAAC,IAAII,EAAEJ,EAAE,GAAGK,QAAQC,IAAI,qBAAqBF,GAAGH,OAAOM,GAAGC,SAAS,0BAA0B,CAACC,OAAO,CAAC,OAAO,UAAUC,QAAQ,CAACC,OAAOP,EAAEQ,OAAO,EAAEC,KAAK,WAAWC,KAAK,SAASd,GAAGK,QAAQC,IAAI,aAAaF,GAAGL,EAAEC,EAAEC,OAAOc,kBAAkBX,GAAG,CAACY,OAAO,SAAShB,GAAGD,EAAEkB,QAAQ,SAASlB,GAAGA,EAAEmB,OAAO,IAAId,EAAEL,EAAEoB,KAAKnB,EAAEoB,KAAKC,cAActB,EAAEmB,OAAO,SAASnB,GAAG,IAAIC,EAAEJ,EAAEK,OAAOqB,MAAMrB,OAAOC,YAAYqB,KAAK,OAAOC,KAAK,iBAAiB,GAAG,GAAGxB,EAAEG,OAAO,CAAC,IAAIsB,EAAE,GAAGzB,EAAE0B,KAAK,SAAS3B,EAAEC,GAAG,IAAII,EAAEuB,SAAS/B,EAAEI,GAAG4B,KAAK,cAAcH,EAAEI,KAAKzB,KAAKC,QAAQC,IAAImB,GAAGxB,OAAO6B,KAAK,CAACC,OAAO,8CAA8CC,SAAS,SAASjC,GAAG,SAASA,EAAEkC,UAAUC,OAAOC,SAASC,KAAK,kCAAkCrC,EAAEkC,UAAUI,KAAK,CAACC,UAAUlC,EAAEmC,QAAQd,GAAGe,IAAI5C,EAAE,mBAAmB6C,QAAO,EAAGC,MAAM,SAAS3C,GAAGM,QAAQC,IAAI,SAASP,EAAEkC,iBAAiBhC,OAAO0C,MAAM,gDAAgD1C,OAAOM,GAAGC,SAAS,0BAA0B,CAACC,OAAO,CAAC,OAAO,UAAUC,QAAQ,CAACE,OAAO,KAAKE,KAAK,SAASf,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAEI,OAAOH,IAAIK,QAAQC,IAAI,YAAYP,EAAEC,GAAGW,UAAUV,OAAOM,GAAGC,SAAS,0BAA0B,CAACC,OAAO,CAAC,OAAO,UAAUC,QAAQ,CAACE,OAAO,KAAKE,KAAK,SAASf,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAEI,OAAOH,IAAIC,OAAO2C,GAAGC,KAAK/C,GAAGC,EAAEC,GAAGW,OAAO,CAACmC,QAAQ,SAAS/C,GAAGE,OAAOM,GAAGC,SAAS,0BAA0B,CAACC,OAAO,CAAC,QAAQC,QAAQ,CAACE,OAAO,EAAEC,KAAK,WAAWF,OAAOZ,EAAEgD,WAAWjC,KAAK,SAASd,GAAG,IAAI,IAAII,EAAE,EAAEA,EAAEJ,EAAEG,OAAOC,IAAI,CAAC,IAAIqB,EAAE1B,EAAEiD,QAAQjD,EAAEqB,KAAKC,cAAcrB,EAAEI,GAAGe,KAAK,SAASpB,GAAGM,QAAQC,IAAI,gBAAgBL,OAAO6B,KAAK,CAACC,OAAO,yCAAyCC,SAAS,SAASjC,GAAGM,QAAQC,IAAI,2BAA2BD,QAAQC,IAAIP,GAAG,SAASA,EAAEkC,UAAUC,OAAOC,SAASC,KAAK,kCAAkCrC,EAAEkC,UAAUI,KAAK,CAACC,UAAUvC,EAAEkD,cAAcC,UAAUC,OAAO1B,GAAGe,IAAI5C,EAAE,mBAAmB6C,QAAO,EAAGC,MAAM,SAAS3C,GAAGM,QAAQC,IAAI,SAASP,EAAEkC"}